<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>Arrived</h2>
    <form>
        <label for="">Activity</label>
        <input type="text" id="activity">
        <label for="">Status</label>
        <input type="text" id="status">
        <button onclick=updateStatus() type="button">Update</button>
        <button onclick="cancleUpdate()" type="button">Cancle</button>
    </form>
    <script src="./to-do list.html"></script>
    <script>
        var todoActivities = JSON.parse(localStorage.getItem("todoActivities"))
        var url = window.location.href;
        var id = url.substr(url.indexOf("?") + 1);
        var activity = todoActivities.find((activity) => activity.activityId == id);

        for (a in activity) {
            if (a !== "activityId") {
                document.getElementById(a).value = activity[a]
            }
        }

        function cancleUpdate() {
            window.location.href = "./to-do-list.html"
        }

        function updateStatus() {
            for (a in activity) {
                if (a !== "activityId") {
                    activity[a] = document.getElementById(a).value;
                }
            }
            todoActivities.forEach((act) => {
                if (act.activityId === activity.activityId) {
                    act == activity;
                }
            });
            localStorage.setItem("todoActivities", JSON.stringify(todoActivities))
            window.location.href = "./to-do-list.html";
        }
    </script>
</body>

</html>