<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document api </title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
    <button  onclick="getData()">click me for FillText</button>
    <button  onclick="getDataFake()">click me for FakeApiProducts</button>
    <button  onclick="getDataFlipkart()">click me for Flipkart</button>
    <button  onclick="getData()">click me for FillText</button>
    <table class="table">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">fname</th>
            <th scope="col">lname</th>
            <th scope="col">tel</th>
            <th scope="col">address</th>
            <th scope="col">city</th>
            <th scope="col">state</th>
            <th scope="col">zip</th>
            <th scope="col">edit</th>
            <th scope="col">delete</th>
          </tr>
        </thead>
        <tbody>
         
        </tbody>
      </table>
      <form>
        <div class="mb-3">
            <label for="email" class="form-label">Email address</label>
            <input type="email" class="form-control" id="email" onkeyup="validate()">
        </div>
        <div class="mb-3">
            <label for="firstName" class="form-label">firstName</label>
            <input type="text" class="form-control" id="firstName" onkeyup="validate()">
        </div>
        <div class="mb-3">
            <label for="userName" class="form-label">userName</label>
            <input type="text" class="form-control" id="userName" onkeyup="validate()">
        </div>
        <button type="button" class="btn btn-primary" disabled="true" id=submit>Submit</button>
        <button type="button" onclick="updateElement()" class="btn btn-info" style="display:none" id=update >Update</button>
    </form>
    <script>

        // display elements
        function displayElements(all) {
            // all = [];
            // var employee = {
            //     email: "",
            //     firstName: "",
            //     userName: "",
            // }
           document.querySelector("tbody").innerHTML = "";
            all.forEach((employee, i) => {
                var myTr = document.createElement("tr");
                var indexId = document.createElement("td");
                indexId.innerHTML = i + 1;
                myTr.appendChild(indexId);
                document.querySelector("tbody").appendChild(myTr);
                for (a in employee) {
                    var myTd = document.createElement("td");
                    myTd.innerHTML = employee[a];
                    myTr.appendChild(myTd);
                 
                }
                // edit button
                var edited = document.createElement("td");
                var editBtn = document.createElement("button");
                editBtn.setAttribute("class", "btn-warning");
                editBtn.setAttribute("onclick", "editElement(" + i + ")")
                editBtn.innerHTML = 'edit';

                myTr.appendChild(edited)
                edited.appendChild(editBtn)

                //    delete button 
                var deleted = document.createElement("td");
                var deleteBtn = document.createElement("button");
                deleteBtn.setAttribute("class", "btn-danger");
                deleteBtn.setAttribute("onclick", "deleteElement(" + i + ")")
                deleteBtn.innerHTML = 'Delete';

                myTr.appendChild(deleted)
                deleted.appendChild(deleteBtn)

                document.querySelector("tbody").appendChild(myTr);
            });
           
        }
        displayElements();

        // get data from api of filltext

        function getData(){
            var info = new XMLHttpRequest();
            info.onreadystatechange = function (){
                if (info.status == 200 && info.readyState == 4 ){
                    console.log (info.response);
                    var  getinfo = JSON.parse(info.response);
                    console.log (getinfo);
                    displayElements(getinfo)
                }
            }
            info.open('GET' , "http://www.filltext.com/?rows=10&fname={firstName}&lname={lastName}&tel={phone|format}&address={streetAddress}&city={city}&state={usState|abbr}&zip={zip}&pretty=true");
            info.send();
           
          
        }
        
        // get data from api of  fakeapi
        function getDataFake(){
            var info = new XMLHttpRequest();
            info.onreadystatechange = function (){
                if (info.status == 200 && info.readyState == 4 ){
                    console.log (info.response);
                    var  getinfo = JSON.parse(info.response);
                    console.log (getinfo);
                }
            }
            info.open('GET' , "https://fakestoreapi.com/products");
            info.send();
           
          
        }

        // delete elements 
        function deleteElement(i){
    // var  employee  = {
    //         email :"" ,
    //         firstName: "",
    //         userName : "" ,
    //     }
    all.splice(i,1);
    localStorage.setItem("akhil" ,JSON.stringify(all));
    deleteElement();
    console.log("clicked value to delete " + i);
}
    </script>
</body>
</html> 